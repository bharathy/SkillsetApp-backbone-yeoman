window.skillsetApp={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";new skillsetApp.Views.ApplicationView}},$(document).ready(function(){"use strict";skillsetApp.init()}),skillsetApp.Routers=skillsetApp.Routers||{},function(){"use strict";skillsetApp.Routers.ApplicationRouter=Backbone.Router.extend({})}(),skillsetApp.Views=skillsetApp.Views||{},function(a){skillsetApp.Views.ApplicationView=Backbone.View.extend({el:"#skillsetapp",initialize:function(){this.inputSkill=this.$("#inputSkill"),this.inputScore=this.$("#inputScore"),this.rightCol=this.$(".rc"),"undefined"!=typeof skillsetApp.skills&&(skillsetApp.skills.on("add",this.addSkill,this),skillsetApp.skills.on("reset",this.addAllSkill,this),skillsetApp.skills.on("remove",this.toggleTableView,this),skillsetApp.skills.fetch()),this.toggleTableView()},events:{"click #addSkill":"createSkill"},createSkill:function(){var b=[],c=this.inputScore.val(),d=this.inputSkill.val(),e=!1;skillsetApp.skills.find(function(a){a.get("skill")==d&&(e=!0)}),(""===a.trim(c)||isNaN(c)||0>c||c>5)&&(b.push("Please enter required score in 0 - 5 scale.<br/>"),this.inputScore.focus()),""===a.trim(this.inputSkill.val())&&(b.push("Please enter required skill field.<br/>"),this.inputSkill.focus()),e&&(b.push('Already "'+d+'" skill exist. So please add new skill! <br/>'),this.inputSkill.focus()),0===b.length?(a(".error").html(""),skillsetApp.skills.create(this.newAttributes()),this.inputSkill.val(""),this.inputScore.val("")):a(".error").html(b.join("")),this.toggleTableView()},addSkill:function(b){var c=new skillsetApp.Views.skillView({model:b});a("#skillList").append(c.render().el)},addAllSkill:function(){this.$("#skillList").html(""),skillsetApp.skills.each(this.addSkill,this)},newAttributes:function(){return{skill:this.inputSkill.val().trim(),score:this.inputScore.val().trim()}},toggleTableView:function(){skillsetApp.skills.length?this.rightCol.show():this.rightCol.hide()}})}(jQuery),skillsetApp.Views=skillsetApp.Views||{},function(a){skillsetApp.Views.skillView=Backbone.View.extend({tagName:"tr",template:_.template(a("#item-template").html()),events:{"click .destroy":"removeSkill"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},removeSkill:function(){this.model.destroy()},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}(jQuery),skillsetApp.Models=skillsetApp.Models||{},function(){"use strict";skillsetApp.Models.ApplicationModel=Backbone.Model.extend({defaults:{skill:"sample",score:5}})}(),skillsetApp.Collections=skillsetApp.Collections||{},function(){"use strict";skillsetApp.Collections.ApplicationCollection=Backbone.Collection.extend({model:skillsetApp.Models.ApplicationModel,localStorage:new Backbone.LocalStorage("skillset-backbone")}),skillsetApp.skills=new skillsetApp.Collections.ApplicationCollection}();